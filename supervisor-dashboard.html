<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAU Inventory - Supervisor Dashboard</title>
    <link rel="stylesheet" href="supervisor-dashboard.css">
</head>
<body>
    <div class="dashboard-container">
        <header class="header">
            <div class="header-content">
                <div class="logo" onclick="goToDashboard()" style="cursor: pointer;" title="Go to Dashboard">
                    <h1>PAU Inventory</h1>
                    <span>Supervisor Dashboard</span>
                </div>
                <div class="user-info">
                    <p style="display: none;"><span class="role-badge supervisor">Supervisor</span></p>
                    <span id="welcomeMessage">Welcome, Admin!</span>
                    <button id="logoutBtn" class="logout-btn">Logout</button>
                </div>
            </div>
        </header>
        
        <main class="main-content">
            <div class="dashboard-grid">
                <!-- Key Performance Metrics -->
                <section class="kpi-section">
                    <h2>Key Performance Indicators</h2>
                    <div class="kpi-grid">
                        <div class="kpi-card revenue" onclick="showKpiModal('revenue')" style="cursor: pointer;">
                            <div class="kpi-icon">üí∞</div>
                            <div class="kpi-info">
                                <h3>Total Revenue</h3>
                                <p class="kpi-value">$125,450</p>
                                <span class="kpi-trend positive">+12.5%</span>
                            </div>
                        </div>
                        
                        <div class="kpi-card profit" onclick="showKpiModal('profit')" style="cursor: pointer;">
                            <div class="kpi-icon">üìà</div>
                            <div class="kpi-info">
                                <h3>Net Profit</h3>
                                <p class="kpi-value">$28,900</p>
                                <span class="kpi-trend positive">+8.3%</span>
                            </div>
                        </div>
                        
                        <div class="kpi-card wastage" onclick="showKpiModal('wastage')" style="cursor: pointer;">
                            <div class="kpi-icon">üóëÔ∏è</div>
                            <div class="kpi-info">
                                <h3>Wastage Cost</h3>
                                <p class="kpi-value">$2,150</p>
                                <span class="kpi-trend negative">+15.2%</span>
                            </div>
                        </div>
                        
                        <div class="kpi-card efficiency" onclick="showKpiModal('efficiency')" style="cursor: pointer;">
                            <div class="kpi-icon">‚ö°</div>
                            <div class="kpi-info">
                                <h3>Efficiency</h3>
                                <p class="kpi-value">87.5%</p>
                                <span class="kpi-trend positive">+3.1%</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Stock Summary -->
                <section class="stock-section">
                    <h2>Stock Summary</h2>
                    <div class="stock-grid">
                        <div class="stock-card">
                            <div class="stock-header">
                                <h3>Total Inventory Value</h3>
                                <span class="stock-value">$45,200</span>
                            </div>
                            <div class="stock-breakdown">
                                <div class="stock-item">
                                    <span>Raw Ingredients</span>
                                    <span>$32,800</span>
                                </div>
                                <div class="stock-item">
                                    <span>Finished PAU Products</span>
                                    <span>$12,400</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stock-alerts">
                            <h3>Stock Alerts <button onclick="showStockAlertsModal()" class="expand-btn" title="View Details">üîç</button></h3>
                            <div class="alert-list" onclick="showStockAlertsModal()" style="cursor: pointer;">
                                <div class="alert-item critical">
                                    <span class="alert-icon">üî¥</span>
                                    <div class="alert-info">
                                        <strong>All Purpose Flour</strong>
                                        <p>Only 12 kg remaining (Min: 50 kg)</p>
                                    </div>
                                </div>
                                <div class="alert-item warning">
                                    <span class="alert-icon">üü°</span>
                                    <div class="alert-info">
                                        <strong>Instant Dry Yeast</strong>
                                        <p>3.2 kg remaining (Min: 3 kg)</p>
                                    </div>
                                </div>
                                <div class="alert-item expired">
                                    <span class="alert-icon">‚è∞</span>
                                    <div class="alert-info">
                                        <strong>Char Siew (Fresh)</strong>
                                        <p>Expires in 1 day</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Sales Analytics -->
                <section class="analytics-section">
                    <div class="section-header">
                        <h2>Sales & Analytics</h2>
                        <button onclick="openSalesAnalytics()" class="view-details-btn">üìä View Detailed Analytics</button>
                    </div>
                    <div class="analytics-grid">
                        <div class="chart-container">
                            <h3>Monthly Sales Trend</h3>
                            <div class="chart-placeholder">
                                <div class="chart-bars">
                                    <div class="bar clickable-bar" style="height: 60%;" data-value="$18.5k" data-month="January" data-growth="+5.2%" onclick="showChartDetails(this)"></div>
                                    <div class="bar clickable-bar" style="height: 75%;" data-value="$22.3k" data-month="February" data-growth="+8.1%" onclick="showChartDetails(this)"></div>
                                    <div class="bar clickable-bar" style="height: 85%;" data-value="$28.1k" data-month="March" data-growth="+12.4%" onclick="showChartDetails(this)"></div>
                                    <div class="bar clickable-bar" style="height: 90%;" data-value="$31.2k" data-month="April" data-growth="+15.2%" onclick="showChartDetails(this)"></div>
                                    <div class="bar clickable-bar" style="height: 100%;" data-value="$35.8k" data-month="May" data-growth="+18.7%" onclick="showChartDetails(this)"></div>
                                    <div class="bar clickable-bar" style="height: 95%;" data-value="$33.1k" data-month="June" data-growth="+16.3%" onclick="showChartDetails(this)"></div>
                                </div>
                                <div class="chart-labels">
                                    <span>Jan</span>
                                    <span>Feb</span>
                                    <span>Mar</span>
                                    <span>Apr</span>
                                    <span>May</span>
                                    <span>Jun</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="top-products">
                            <h3>Top Selling Products <button onclick="showTopProductsModal()" class="expand-btn" title="View Details">üîç</button></h3>
                            <div class="product-list" onclick="showTopProductsModal()" style="cursor: pointer;">
                                <div class="product-item">
                                    <span class="product-rank">1</span>
                                    <div class="product-info">
                                        <strong>Classic Pau</strong>
                                        <p>1,450 units sold</p>
                                    </div>
                                    <span class="product-revenue">$5,075</span>
                                </div>
                                <div class="product-item">
                                    <span class="product-rank">2</span>
                                    <div class="product-info">
                                        <strong>Char Siew Pau</strong>
                                        <p>980 units sold</p>
                                    </div>
                                    <span class="product-revenue">$4,410</span>
                                </div>
                                <div class="product-item">
                                    <span class="product-rank">3</span>
                                    <div class="product-info">
                                        <strong>Lotus Bao</strong>
                                        <p>720 units sold</p>
                                    </div>
                                    <span class="product-revenue">$3,600</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Management Tools -->
                <section class="management-section">
                    <h2>Management Tools</h2>
                    <div class="tools-grid">
                        <button class="tool-btn" onclick="openInventoryManagement()">
                            <span class="tool-icon">üì¶</span>
                            <div class="tool-info">
                                <strong>Inventory Management</strong>
                                <p>Add, edit, and track all inventory items</p>
                            </div>
                        </button>
                        
                        <button class="tool-btn" onclick="openProductionTracking()">
                            <span class="tool-icon">üìã</span>
                            <div class="tool-info">
                                <strong>Production Tracking</strong>
                                <p>Monitor inbound and outbound production</p>
                            </div>
                        </button>
                        
                        <button class="tool-btn" onclick="openSupplyRequest()">
                            <span class="tool-icon">üìù</span>
                            <div class="tool-info">
                                <strong>Supply Request</strong>
                                <p>Request supplies and manage supply orders</p>
                            </div>
                        </button>
                        
                        <button class="tool-btn" onclick="openWastageLogging()">
                            <span class="tool-icon">üóëÔ∏è</span>
                            <div class="tool-info">
                                <strong>Wastage Logging</strong>
                                <p>Track and analyze wastage for factory and outlets</p>
                            </div>
                        </button>
                        
                        <button class="tool-btn" onclick="openStaffManagement()">
                            <span class="tool-icon">üë•</span>
                            <div class="tool-info">
                                <strong>Staff Management</strong>
                                <p>Manage staff accounts and permissions</p>
                            </div>
                        </button>
                        
                        <button class="tool-btn" onclick="openReportIssue()">
                            <span class="tool-icon">üîß</span>
                            <div class="tool-info">
                                <strong>Report Issue</strong>
                                <p>Report and manage equipment or operational issues</p>
                            </div>
                        </button>
                        
                        <button class="tool-btn" onclick="generateReport()">
                            <span class="tool-icon">üìä</span>
                            <div class="tool-info">
                                <strong>Generate Reports</strong>
                                <p>Create detailed financial and operational reports</p>
                            </div>
                        </button>
                        
                        <button class="tool-btn" onclick="openSettings()">
                            <span class="tool-icon">‚öôÔ∏è</span>
                            <div class="tool-info">
                                <strong>System Settings</strong>
                                <p>Configure system preferences and alerts</p>
                            </div>
                        </button>
                    </div>
                </section>
            </div>
        </main>
    </div>
    
    <!-- Chart Details Popup Modal -->
    <div id="chartModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Sales Details</h3>
                <button onclick="closeChartModal()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="chart-details">
                    <div class="detail-item">
                        <label>Month:</label>
                        <span id="modalMonth">-</span>
                    </div>
                    <div class="detail-item">
                        <label>Sales Amount:</label>
                        <span id="modalAmount">-</span>
                    </div>
                    <div class="detail-item">
                        <label>Growth:</label>
                        <span id="modalGrowth">-</span>
                    </div>
                    <div class="detail-item">
                        <label>Top Products:</label>
                        <span id="modalProducts">-</span>
                    </div>
                    <div class="detail-item">
                        <label>Revenue Source:</label>
                        <span id="modalSource">-</span>
                    </div>
                </div>
                <div class="modal-actions">
                    <button onclick="viewDetailedReport()" class="detail-btn">View Detailed Report</button>
                    <button onclick="closeChartModal()" class="close-detail-btn">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Stock Alerts Details Modal -->
    <div id="stockAlertsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header alert-modal-header">
                <h3>üö® Stock Alerts Details</h3>
                <button onclick="closeStockAlertsModal()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="alert-details">
                    <div class="alert-section critical-section">
                        <h4>üî¥ Critical Stock Levels</h4>
                        <div class="detailed-alert-item">
                            <div class="item-info">
                                <strong>All Purpose Flour</strong>
                                <p>Current Stock: 12 kg | Minimum Required: 50 kg</p>
                                <p>Location: Factory Storage A | Supplier: Golden Wheat Co.</p>
                                <p class="urgency">‚ö†Ô∏è URGENT: Restock needed immediately</p>
                            </div>
                        </div>
                    </div>
                    <div class="alert-section warning-section">
                        <h4>üü° Low Stock Warnings</h4>
                        <div class="detailed-alert-item">
                            <div class="item-info">
                                <strong>Instant Dry Yeast</strong>
                                <p>Current Stock: 3.2 kg | Minimum Required: 3 kg</p>
                                <p>Location: Factory Storage B | Supplier: Sweet Supply Ltd.</p>
                                <p class="notice">üìÖ Consider restocking within 2-3 days</p>
                            </div>
                        </div>
                    </div>
                    <div class="alert-section expiring-section">
                        <h4>‚è∞ Expiring Items</h4>
                        <div class="detailed-alert-item">
                            <div class="item-info">
                                <strong>Char Siew (Fresh)</strong>
                                <p>Expires: Tomorrow (July 25, 2025)</p>
                                <p>Current Stock: 2.5 kg | Location: Outlet Refrigerator</p>
                                <p class="action">üçΩÔ∏è Priority use in today's production</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button onclick="openInventoryManagement()" class="action-btn">Manage Inventory</button>
                    <button onclick="closeStockAlertsModal()" class="close-btn-modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Top Products Details Modal -->
    <div id="topProductsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header products-modal-header">
                <h3>üèÜ Top Selling Products Details</h3>
                <button onclick="closeTopProductsModal()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="products-details">
                    <div class="product-detail-section">
                        <div class="product-detail-item rank-1">
                            <div class="rank-badge">1st</div>
                            <div class="product-detail-info">
                                <h4>ü•ü Classic Pau</h4>
                                <div class="product-stats">
                                    <p><strong>Units Sold:</strong> 1,450 pieces</p>
                                    <p><strong>Revenue Generated:</strong> $5,075</p>
                                    <p><strong>Average Price:</strong> $3.50 per piece</p>
                                    <p><strong>Growth:</strong> +15.2% vs last month</p>
                                    <p><strong>Profit Margin:</strong> 65%</p>
                                </div>
                            </div>
                        </div>
                        <div class="product-detail-item rank-2">
                            <div class="rank-badge">2nd</div>
                            <div class="product-detail-info">
                                <h4>ü•© Char Siew Pau</h4>
                                <div class="product-stats">
                                    <p><strong>Units Sold:</strong> 980 pieces</p>
                                    <p><strong>Revenue Generated:</strong> $4,410</p>
                                    <p><strong>Average Price:</strong> $4.50 per piece</p>
                                    <p><strong>Growth:</strong> +12.8% vs last month</p>
                                    <p><strong>Profit Margin:</strong> 68%</p>
                                </div>
                            </div>
                        </div>
                        <div class="product-detail-item rank-3">
                            <div class="rank-badge">3rd</div>
                            <div class="product-detail-info">
                                <h4>üå∏ Lotus Bao</h4>
                                <div class="product-stats">
                                    <p><strong>Units Sold:</strong> 720 pieces</p>
                                    <p><strong>Revenue Generated:</strong> $3,600</p>
                                    <p><strong>Average Price:</strong> $5.00 per piece</p>
                                    <p><strong>Growth:</strong> +8.9% vs last month</p>
                                    <p><strong>Profit Margin:</strong> 72%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button onclick="openSalesAnalytics()" class="action-btn">View Full Analytics</button>
                    <button onclick="closeTopProductsModal()" class="close-btn-modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- KPI Details Modal -->
    <div id="kpiModal" class="modal">
        <div class="modal-content">
            <div class="modal-header kpi-modal-header">
                <h3 id="kpiModalTitle">üìä Performance Details</h3>
                <button onclick="closeKpiModal()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="kpi-details" id="kpiDetailsContent">
                    <!-- Dynamic content will be inserted here -->
                </div>
                <div class="modal-actions">
                    <button onclick="generateReport()" class="action-btn">Generate Full Report</button>
                    <button onclick="closeKpiModal()" class="close-btn-modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="supervisor-dashboard.js"></script>
</body>
</html>
